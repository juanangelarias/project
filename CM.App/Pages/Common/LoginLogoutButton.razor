
@inject NavigationManager Navigation
@inject IGeneralStateProvider State

<AuthorizeView>
    <Authorized>
        <MudButton ButtonType="ButtonType.Button"
                   Variant="Variant.Filled"
                   Color="Color.Primary"
                   OnClick="Logout">
            Logout
        </MudButton>
    </Authorized>
    <NotAuthorized>
        <MudButton ButtonType="ButtonType.Button"
                           Variant="Variant.Filled"
                           Color="Color.Primary"
                           OnClick="Login">
                    Login
                </MudButton>
    </NotAuthorized>
</AuthorizeView>

@code
{
    [CascadingParameter]
    private Task<AuthenticationStateProvider> authenticationState { get; set; }

    private AuthenticationStateProvider? _authState;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        _authState = await authenticationState;
    }

    private void Login()
    {
        Navigation.NavigateTo("/login");
    }
    
    private void Logout()
    {
        State.Logout();
        Navigation.NavigateTo("/login");
    }
}
